<!DOCTYPE html>

<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
  <div class="container_1">
    <div class="head">
      <img src="\assets\img\lol.png"> book service
      <button class="btn-add" data-bs-toggle="modal" data-bs-target="#addButton"> Add book</button>
    </div>
    <div class="info">
      <div class="md-form active-pink active-pink-2 mb-3">
        <input class="form-control" type="search" id="search1" aria-label="Search" mdbInput placeholder="Search"
          [(ngModel)]="bookName" (ngModelChange)="SearchBook()">
      </div>
      <table class="table">
        <thead>
          <tr>
            <th scope="col"> Author name</th>
            <th scope="col"> Book name</th>
            <th scope="col"> Amount</th>
            <th scope="col"> Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of tableItem?.bookList">
            <td>{{item?.book?.author?.authorName}}</td>
            <td>{{item?.book?.bookName}}</td>
            <td>{{item?.quantity}}</td>
            <td>
              <button type="button" class="btn btn-light" (click)="counter(item, 'add')">+</button>
              <span> {{item?.countToBy}} </span>
              <button type="button" class="btn btn-light" (click)="counter(item, 'minus')">-</button>
              <button type="button" class="btn-primary1" (click)="buyBook(item)" data-bs-toggle="modal"
                data-bs-target="#exampleModal">Buy</button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">You ordered book</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <p>Your order id: {{orderId}}</p>
              <p>status: {{orderStatus}}</p>
              <p>message: {{orderMessage}}</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal fade" id="addButton" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Add book
              </h5>
            </div>
            <div class="modal-body">
              Please add new book in system:
              <br />
              <form [formGroup]="form" (ngSubmit)="onSubmit()">

                <input placeholder="Book name" formControlName="bookName">
                <br />
                <input placeholder="Author name" formControlName="authorName">
                <br />
                <input placeholder="Quantity" formControlName="quantity">
                <br />
                <br />
                <div class="modal-footer">
                  <button type="submit" class="btn-primary1" data-bs-dismiss="modal">Add</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>